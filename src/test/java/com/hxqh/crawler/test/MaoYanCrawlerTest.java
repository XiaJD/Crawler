package com.hxqh.crawler.test;

import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;
import com.google.gson.JsonObject;
import com.hxqh.crawler.common.Constants;
import com.hxqh.crawler.domain.RealTimeMovie;
import com.hxqh.crawler.service.SystemService;
import com.hxqh.crawler.util.DateUtils;
import com.hxqh.crawler.util.FileUtils;
import com.hxqh.crawler.util.NumUtils;
import com.hxqh.crawler.util.ReadUrlUtils;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

/**
 * Created by Ocean lin on 2018/2/7.
 *
 * @author Lin
 */
@RunWith(SpringRunner.class)
@SpringBootTest
public class MaoYanCrawlerTest {


    @Autowired
    private SystemService systemService;

    @Test
    public void url() {
        while (true) {
            //  获取当前时间
            String dateString = DateUtils.getTodayDate();

            try {
                String url = "https://box.maoyan.com/promovie/api/box/second.json";
                JsonObject xpath = ReadUrlUtils.getXpath(url);

                FileUtils.writeStrToFile(xpath.toString(),
                        Constants.MAOYAN_PATH + Constants.FILE_SPLIT + dateString);

                System.out.println(xpath);
                System.out.println();
                Thread.sleep(Constants.ONE_HOUR);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

    }


    @Test
    public void parse() {
        String string = "{\"success\":true,\"data\":{\"updateInfo\":\"北京时间 10:19:59\",\"totalBoxUnitInfo\":\"万\",\"splitTotalBox\":\"3130.6\",\"serverTimestamp\":1517537999000,\"crystal\":{\"maoyanViewInfo\":\"37.3\",\"status\":1,\"viewInfo\":\"111.2\"},\"totalBoxInfo\":\"3411.6\",\"list\":[{\"showInfo\":\"50595\",\"boxRate\":\"18.1%\",\"releaseInfo\":\"上映2天\",\"avgShowView\":\"4\",\"sumBoxInfo\":\"1628.1万\",\"splitBoxRate\":\"18.5%\",\"seatRate\":\"18.8%\",\"movieId\":338493,\"splitBoxInfo\":\"582.27\",\"avgSeatView\":\"4.0%\",\"viewInfo\":\"20.0\",\"showRate\":\"18.2%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"620.86\",\"avgViewBox\":\"30.8\",\"viewInfoV2\":\"20.0万\",\"splitAvgViewBox\":\"28.9\",\"movieName\":\"南极之恋\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"1497.7万\"},{\"showInfo\":\"7344\",\"boxRate\":\"17.1%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"25\",\"sumBoxInfo\":\"588.4万\",\"splitBoxRate\":\"17.1%\",\"seatRate\":\"1.9%\",\"movieId\":1212787,\"splitBoxInfo\":\"538.05\",\"avgSeatView\":\"33.7%\",\"viewInfo\":\"18.3\",\"showRate\":\"2.6%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"585.01\",\"avgViewBox\":\"31.9\",\"viewInfoV2\":\"18.3万\",\"splitAvgViewBox\":\"29.3\",\"movieName\":\"坏爸爸\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"541.5万\"},{\"showInfo\":\"41551\",\"boxRate\":\"11.4%\",\"releaseInfo\":\"上映2天\",\"avgShowView\":\"4\",\"sumBoxInfo\":\"1773.3万\",\"splitBoxRate\":\"11.7%\",\"seatRate\":\"18.2%\",\"movieId\":246714,\"splitBoxInfo\":\"366.49\",\"avgSeatView\":\"3.0%\",\"viewInfo\":\"13.2\",\"showRate\":\"14.9%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"390.55\",\"avgViewBox\":\"29.3\",\"viewInfoV2\":\"13.2万\",\"splitAvgViewBox\":\"27.5\",\"movieName\":\"马戏之王\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"1603.9万\"},{\"showInfo\":\"27436\",\"boxRate\":\"9.2%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"5\",\"sumBoxInfo\":\"319.1万\",\"splitBoxRate\":\"8.9%\",\"seatRate\":\"8.9%\",\"movieId\":1203768,\"splitBoxInfo\":\"279.81\",\"avgSeatView\":\"4.4%\",\"viewInfo\":\"10.9\",\"showRate\":\"9.8%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"316.60\",\"avgViewBox\":\"28.8\",\"viewInfoV2\":\"10.9万\",\"splitAvgViewBox\":\"25.4\",\"movieName\":\"浪矢解忧杂货店\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"282.2万\"},{\"showInfo\":\"34718\",\"boxRate\":\"8.7%\",\"releaseInfo\":\"上映15天\",\"avgShowView\":\"3\",\"sumBoxInfo\":\"5.01亿\",\"splitBoxRate\":\"8.7%\",\"seatRate\":\"14.5%\",\"movieId\":1208122,\"splitBoxInfo\":\"274.27\",\"avgSeatView\":\"2.3%\",\"viewInfo\":\"10.0\",\"showRate\":\"12.4%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"298.94\",\"avgViewBox\":\"29.6\",\"viewInfoV2\":\"10.0万\",\"splitAvgViewBox\":\"27.2\",\"movieName\":\"神秘巨星\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"4.63亿\"},{\"showInfo\":\"16282\",\"boxRate\":\"7.4%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"6\",\"sumBoxInfo\":\"261.8万\",\"splitBoxRate\":\"7.1%\",\"seatRate\":\"4.9%\",\"movieId\":1208748,\"splitBoxInfo\":\"224.35\",\"avgSeatView\":\"6.8%\",\"viewInfo\":\"8.5\",\"showRate\":\"5.8%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"253.53\",\"avgViewBox\":\"29.8\",\"viewInfoV2\":\"8.5万\",\"splitAvgViewBox\":\"26.3\",\"movieName\":\"小马宝莉大电影\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"232.6万\"},{\"showInfo\":\"8433\",\"boxRate\":\"6.0%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"8\",\"sumBoxInfo\":\"245.1万\",\"splitBoxRate\":\"5.8%\",\"seatRate\":\"2.5%\",\"movieId\":1212533,\"splitBoxInfo\":\"184.49\",\"avgSeatView\":\"10.0%\",\"viewInfo\":\"6.4\",\"showRate\":\"3.0%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"206.65\",\"avgViewBox\":\"32.1\",\"viewInfoV2\":\"6.4万\",\"splitAvgViewBox\":\"28.7\",\"movieName\":\"金龟子\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"221.1万\"},{\"showInfo\":\"21293\",\"boxRate\":\"4.6%\",\"releaseInfo\":\"上映8天\",\"avgShowView\":\"3\",\"sumBoxInfo\":\"2.11亿\",\"splitBoxRate\":\"4.6%\",\"seatRate\":\"8.6%\",\"movieId\":248639,\"splitBoxInfo\":\"146.66\",\"avgSeatView\":\"2.1%\",\"viewInfo\":\"4.6\",\"showRate\":\"7.6%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"157.52\",\"avgViewBox\":\"33.8\",\"viewInfoV2\":\"4.6万\",\"splitAvgViewBox\":\"31.5\",\"movieName\":\"移动迷宫3：死亡解药\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"1.97亿\"},{\"showInfo\":\"13645\",\"boxRate\":\"4.1%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"4\",\"sumBoxInfo\":\"147.1万\",\"splitBoxRate\":\"4.0%\",\"seatRate\":\"4.1%\",\"movieId\":1204714,\"splitBoxInfo\":\"126.03\",\"avgSeatView\":\"3.5%\",\"viewInfo\":\"4.6\",\"showRate\":\"4.9%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"141.94\",\"avgViewBox\":\"30.3\",\"viewInfoV2\":\"4.6万\",\"splitAvgViewBox\":\"26.9\",\"movieName\":\"忌日快乐\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"130.7万\"},{\"showInfo\":\"16277\",\"boxRate\":\"4.1%\",\"releaseInfo\":\"上映22天\",\"avgShowView\":\"3\",\"sumBoxInfo\":\"6.57亿\",\"splitBoxRate\":\"4.1%\",\"seatRate\":\"5.3%\",\"movieId\":71946,\"splitBoxInfo\":\"131.00\",\"avgSeatView\":\"2.8%\",\"viewInfo\":\"4.5\",\"showRate\":\"5.8%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"141.71\",\"avgViewBox\":\"31.1\",\"viewInfoV2\":\"4.5万\",\"splitAvgViewBox\":\"28.7\",\"movieName\":\"无问西东\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"6.07亿\"},{\"showInfo\":\"6295\",\"boxRate\":\"2.0%\",\"releaseInfo\":\"上映15天\",\"avgShowView\":\"4\",\"sumBoxInfo\":\"1.41亿\",\"splitBoxRate\":\"2.0%\",\"seatRate\":\"1.9%\",\"movieId\":672130,\"splitBoxInfo\":\"63.18\",\"avgSeatView\":\"4.2%\",\"viewInfo\":\"2.3\",\"showRate\":\"2.2%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"68.73\",\"avgViewBox\":\"29.8\",\"viewInfoV2\":\"2.3万\",\"splitAvgViewBox\":\"27.4\",\"movieName\":\"奇迹男孩\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"1.31亿\"},{\"showInfo\":\"6718\",\"boxRate\":\"1.9%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"4\",\"sumBoxInfo\":\"68.2万\",\"splitBoxRate\":\"1.9%\",\"seatRate\":\"1.9%\",\"movieId\":1177952,\"splitBoxInfo\":\"60.91\",\"avgSeatView\":\"6.9%\",\"viewInfo\":\"2.1\",\"showRate\":\"2.4%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"67.93\",\"avgViewBox\":\"31.2\",\"viewInfoV2\":\"2.1万\",\"splitAvgViewBox\":\"28.0\",\"movieName\":\"狗狗的疯狂假期\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"61.2万\"},{\"showInfo\":\"6033\",\"boxRate\":\"1.5%\",\"releaseInfo\":\"上映15天\",\"avgShowView\":\"3\",\"sumBoxInfo\":\"1.39亿\",\"splitBoxRate\":\"1.5%\",\"seatRate\":\"1.8%\",\"movieId\":828745,\"splitBoxInfo\":\"48.68\",\"avgSeatView\":\"2.9%\",\"viewInfo\":\"1.6\",\"showRate\":\"2.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"52.26\",\"avgViewBox\":\"31.2\",\"viewInfoV2\":\"1.6万\",\"splitAvgViewBox\":\"29.1\",\"movieName\":\"公牛历险记\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"1.29亿\"},{\"showInfo\":\"6491\",\"boxRate\":\"0.5%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"1\",\"sumBoxInfo\":\"19.0万\",\"splitBoxRate\":\"0.5%\",\"seatRate\":\"1.9%\",\"movieId\":858598,\"splitBoxInfo\":\"17.41\",\"avgSeatView\":\"14.4%\",\"viewInfo\":\"0.5\",\"showRate\":\"2.3%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"18.86\",\"avgViewBox\":\"32.5\",\"viewInfoV2\":\"5806\",\"splitAvgViewBox\":\"30.0\",\"movieName\":\"莫斯科陷落\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"17.5万\"},{\"showInfo\":\"1993\",\"boxRate\":\"0.5%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"3\",\"sumBoxInfo\":\"25.0万\",\"splitBoxRate\":\"0.5%\",\"seatRate\":\"0.5%\",\"movieId\":1212979,\"splitBoxInfo\":\"17.00\",\"avgSeatView\":\"10.1%\",\"viewInfo\":\"0.5\",\"showRate\":\"0.7%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"18.42\",\"avgViewBox\":\"32.5\",\"viewInfoV2\":\"5669\",\"splitAvgViewBox\":\"30.0\",\"movieName\":\"小狗奶瓶\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"23.5万\"},{\"showInfo\":\"2414\",\"boxRate\":\"0.4%\",\"releaseInfo\":\"上映7天\",\"avgShowView\":\"3\",\"sumBoxInfo\":\"402.8万\",\"splitBoxRate\":\"0.4%\",\"seatRate\":\"0.6%\",\"movieId\":341540,\"splitBoxInfo\":\"15.32\",\"avgSeatView\":\"15.4%\",\"viewInfo\":\"0.5\",\"showRate\":\"0.8%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"16.38\",\"avgViewBox\":\"27.5\",\"viewInfoV2\":\"5942\",\"splitAvgViewBox\":\"25.7\",\"movieName\":\"麦兵兵之夺宝联“萌”\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"380.8万\"},{\"showInfo\":\"3116\",\"boxRate\":\"0.4%\",\"releaseInfo\":\"上映36天\",\"avgShowView\":\"2\",\"sumBoxInfo\":\"19.22亿\",\"splitBoxRate\":\"0.4%\",\"seatRate\":\"0.7%\",\"movieId\":344929,\"splitBoxInfo\":\"14.61\",\"avgSeatView\":\"2.1%\",\"viewInfo\":\"0.4\",\"showRate\":\"1.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"15.64\",\"avgViewBox\":\"34.9\",\"viewInfoV2\":\"4484\",\"splitAvgViewBox\":\"32.5\",\"movieName\":\"前任3：再见前任\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"17.89亿\"},{\"showInfo\":\"2388\",\"boxRate\":\"0.4%\",\"releaseInfo\":\"上映22天\",\"avgShowView\":\"2\",\"sumBoxInfo\":\"4.76亿\",\"splitBoxRate\":\"0.4%\",\"seatRate\":\"0.7%\",\"movieId\":341897,\"splitBoxInfo\":\"14.40\",\"avgSeatView\":\"2.7%\",\"viewInfo\":\"0.4\",\"showRate\":\"0.8%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"15.50\",\"avgViewBox\":\"34.0\",\"viewInfoV2\":\"4554\",\"splitAvgViewBox\":\"31.6\",\"movieName\":\"勇敢者游戏：决战丛林\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"4.45亿\"},{\"showInfo\":\"44\",\"boxRate\":\"0.4%\",\"releaseInfo\":\"上映75天\",\"avgShowView\":\"96\",\"sumBoxInfo\":\"30.7万\",\"splitBoxRate\":\"0.4%\",\"seatRate\":\"<0.1%\",\"movieId\":344661,\"splitBoxInfo\":\"12.63\",\"avgSeatView\":\"71.4%\",\"viewInfo\":\"0.4\",\"showRate\":\"<0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"13.68\",\"avgViewBox\":\"32.5\",\"viewInfoV2\":\"4210\",\"splitAvgViewBox\":\"30.0\",\"movieName\":\"邹碧华\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"28.4万\"},{\"showInfo\":\"941\",\"boxRate\":\"0.3%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"4\",\"sumBoxInfo\":\"12.2万\",\"splitBoxRate\":\"0.3%\",\"seatRate\":\"0.2%\",\"movieId\":341999,\"splitBoxInfo\":\"10.86\",\"avgSeatView\":\"6.9%\",\"viewInfo\":\"0.3\",\"showRate\":\"0.3%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"11.77\",\"avgViewBox\":\"32.5\",\"viewInfoV2\":\"3622\",\"splitAvgViewBox\":\"30.0\",\"movieName\":\"盲·道\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"11.3万\"},{\"showInfo\":\"573\",\"boxRate\":\"0.1%\",\"releaseInfo\":\"上映首日\",\"avgShowView\":\"4\",\"sumBoxInfo\":\"5.9万\",\"splitBoxRate\":\"0.1%\",\"seatRate\":\"0.1%\",\"movieId\":1204800,\"splitBoxInfo\":\"5.43\",\"avgSeatView\":\"26.3%\",\"viewInfo\":\"0.1\",\"showRate\":\"0.2%\",\"releaseInfoColor\":\"#FF9900 1.00\",\"boxInfo\":\"5.89\",\"avgViewBox\":\"32.5\",\"viewInfoV2\":\"1813\",\"splitAvgViewBox\":\"30.0\",\"movieName\":\"余额不足\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"5.4万\"},{\"showInfo\":\"261\",\"boxRate\":\"0.1%\",\"releaseInfo\":\"上映16天\",\"avgShowView\":\"6\",\"sumBoxInfo\":\"6259.7万\",\"splitBoxRate\":\"0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":1048288,\"splitBoxInfo\":\"5.18\",\"avgSeatView\":\"9.2%\",\"viewInfo\":\"0.1\",\"showRate\":\"<0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"5.46\",\"avgViewBox\":\"35.0\",\"viewInfoV2\":\"1560\",\"splitAvgViewBox\":\"33.2\",\"movieName\":\"英雄本色2018\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"5980.7万\"},{\"showInfo\":\"279\",\"boxRate\":\"0.1%\",\"releaseInfo\":\"上映2天\",\"avgShowView\":\"4\",\"sumBoxInfo\":\"97.0万\",\"splitBoxRate\":\"0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":1189346,\"splitBoxInfo\":\"3.41\",\"avgSeatView\":\"12.6%\",\"viewInfo\":\"0.0\",\"showRate\":\"0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"3.52\",\"avgViewBox\":\"37.5\",\"viewInfoV2\":\"939\",\"splitAvgViewBox\":\"36.3\",\"movieName\":\"时空偷渡少女\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"90.0万\"},{\"showInfo\":\"374\",\"boxRate\":\"<0.1%\",\"releaseInfo\":\"上映50天\",\"avgShowView\":\"2\",\"sumBoxInfo\":\"14.19亿\",\"splitBoxRate\":\"<0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":1170264,\"splitBoxInfo\":\"2.40\",\"avgSeatView\":\"3.4%\",\"viewInfo\":\"0.0\",\"showRate\":\"0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"2.57\",\"avgViewBox\":\"35.1\",\"viewInfoV2\":\"733\",\"splitAvgViewBox\":\"32.8\",\"movieName\":\"芳华\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"13.30亿\"},{\"showInfo\":\"9\",\"boxRate\":\"<0.1%\",\"releaseInfo\":\"上映22天\",\"avgShowView\":\"79\",\"sumBoxInfo\":\"126.5万\",\"splitBoxRate\":\"<0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":493549,\"splitBoxInfo\":\"2.38\",\"avgSeatView\":\"40.3%\",\"viewInfo\":\"0.0\",\"showRate\":\"<0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"2.40\",\"avgViewBox\":\"34.0\",\"viewInfoV2\":\"705\",\"splitAvgViewBox\":\"33.8\",\"movieName\":\"大寒\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"125.5万\"},{\"showInfo\":\"6\",\"boxRate\":\"<0.1%\",\"releaseInfo\":\"2017-10\",\"avgShowView\":\"113\",\"sumBoxInfo\":\"37.9万\",\"splitBoxRate\":\"<0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":1209177,\"splitBoxInfo\":\"2.02\",\"avgSeatView\":\"72.9%\",\"viewInfo\":\"0.0\",\"showRate\":\"<0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"2.20\",\"avgViewBox\":\"32.5\",\"viewInfoV2\":\"678\",\"splitAvgViewBox\":\"30.0\",\"movieName\":\"南哥\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"37.6万\"},{\"showInfo\":\"1\",\"boxRate\":\"<0.1%\",\"releaseInfo\":\"2017-07\",\"avgShowView\":\"504\",\"sumBoxInfo\":\"4.03亿\",\"splitBoxRate\":\"<0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":345011,\"splitBoxInfo\":\"1.61\",\"avgSeatView\":\"79.7%\",\"viewInfo\":\"0.0\",\"showRate\":\"<0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"1.73\",\"avgViewBox\":\"34.5\",\"viewInfoV2\":\"504\",\"splitAvgViewBox\":\"32.0\",\"movieName\":\"建军大业\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"3.83亿\"},{\"showInfo\":\"31\",\"boxRate\":\"<0.1%\",\"releaseInfo\":\"上映15天\",\"avgShowView\":\"15\",\"sumBoxInfo\":\"199.4万\",\"splitBoxRate\":\"<0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":344080,\"splitBoxInfo\":\"1.64\",\"avgSeatView\":\"34.5%\",\"viewInfo\":\"0.0\",\"showRate\":\"<0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"1.73\",\"avgViewBox\":\"39.4\",\"viewInfoV2\":\"440\",\"splitAvgViewBox\":\"37.4\",\"movieName\":\"第一夫人\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"186.3万\"},{\"showInfo\":\"18\",\"boxRate\":\"<0.1%\",\"releaseInfo\":\"上映18天\",\"avgShowView\":\"34\",\"sumBoxInfo\":\"95.9万\",\"splitBoxRate\":\"<0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":341323,\"splitBoxInfo\":\"1.58\",\"avgSeatView\":\"47.9%\",\"viewInfo\":\"0.0\",\"showRate\":\"<0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"1.61\",\"avgViewBox\":\"26.5\",\"viewInfoV2\":\"609\",\"splitAvgViewBox\":\"26.1\",\"movieName\":\"一个人的课堂\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"93.9万\"},{\"showInfo\":\"69\",\"boxRate\":\"<0.1%\",\"releaseInfo\":\"上映8天\",\"avgShowView\":\"7\",\"sumBoxInfo\":\"212.3万\",\"splitBoxRate\":\"<0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":558308,\"splitBoxInfo\":\"1.26\",\"avgSeatView\":\"6.0%\",\"viewInfo\":\"0.0\",\"showRate\":\"<0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"1.34\",\"avgViewBox\":\"30.8\",\"viewInfoV2\":\"435\",\"splitAvgViewBox\":\"29.1\",\"movieName\":\"绝命时钟2:22\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"204.6万\"},{\"showInfo\":\"224\",\"boxRate\":\"<0.1%\",\"releaseInfo\":\"上映2天\",\"avgShowView\":\"2\",\"sumBoxInfo\":\"12.4万\",\"splitBoxRate\":\"<0.1%\",\"seatRate\":\"<0.1%\",\"movieId\":1208343,\"splitBoxInfo\":\"1.05\",\"avgSeatView\":\"5.2%\",\"viewInfo\":\"0.0\",\"showRate\":\"<0.1%\",\"releaseInfoColor\":\"#666666 1.00\",\"boxInfo\":\"1.13\",\"avgViewBox\":\"26.2\",\"viewInfoV2\":\"436\",\"splitAvgViewBox\":\"24.2\",\"movieName\":\"毕业旅行笑翻天\",\"onlineBoxRate\":\"--\",\"splitSumBoxInfo\":\"11.4万\"}],\"totalBoxUnit\":\"万\",\"totalBox\":\"3411.6\",\"splitTotalBoxUnit\":\"万\",\"queryDate\":\"2018-02-02\",\"serverTime\":\"2018-02-02 10:19:59\",\"splitTotalBoxUnitInfo\":\"万\",\"splitTotalBoxInfo\":\"3130.6\"}}\n";

        JSONObject json = JSONObject.parseObject(string);
//        System.out.println(JSONObject.toJSONString(json, true));
        JSONArray array = json.getJSONObject("data").getJSONArray("list");
        List<RealTimeMovie> movieArrayList = new ArrayList<>();
        for (int i = 0; i < array.size(); i++) {
            JSONObject jo = array.getJSONObject(i);

            // 来源、电影名称、实时综合票房（万）、累计票房、实时分账票房、累计分账票房、排片场次、新增时间
            String boxInfo = jo.getString("boxInfo");
            String sumBoxInfo = jo.getString("sumBoxInfo");
            String splitBoxInfo = jo.getString("splitBoxInfo");
            String splitSumBoxInfo = jo.getString("splitSumBoxInfo");
            Integer showInfo = Integer.valueOf(jo.getString("showInfo"));
            String releaseInfo = jo.getString("releaseInfo");

            RealTimeMovie realTimeMovie = new RealTimeMovie(Constants.MAO_YAN,
                    jo.getString("filmName"),
                    NumUtils.getNumber(boxInfo),
                    NumUtils.getNumber(sumBoxInfo),
                    NumUtils.getNumber(splitBoxInfo),
                    NumUtils.getNumber(splitSumBoxInfo),
                    releaseInfo,
                    new Date(),
                    showInfo
            );
            movieArrayList.add(realTimeMovie);
        }
        systemService.addMaoYanList(movieArrayList);
    }


}